%ifndef PS2_INC
%define PS2_INC

%include "string.inc"

%include "bootloader/pic.inc"

%define RESPONSE_ACK 0xFA
%define RESPONSE_RESEND 0xFE

%define PS2_DATA	0x60
%define PS2_STATUS	0x64
%define PS2_COMMAND	0x64

%define PS2_COMMAND_READ_CONFIG_BYTE 0x20
%define PS2_COMMAND_WRITE_CONFIG_BYTE 0x60
%define PS2_COMMAND_DISABLE_PORT2 0xA7
%define PS2_COMMAND_ENABLE_PORT2 0xA8
%define PS2_COMMAND_TEST_PORT2 0xA9
%define PS2_COMMAND_TEST_CONTROLLER 0xAA
%define PS2_COMMAND_TEST_PORT1 0xAB
%define PS2_COMMAND_DIAGNOSTIC_DUMP 0xAC
%define PS2_COMMAND_DISABLE_PORT1 0xAD
%define PS2_COMMAND_ENABLE_PORT1 0xAE
%define PS2_COMMAND_COPY_LOW_NIBBLE_INPUT_TO_HIGH_NIBBLE_STATUS 0xC1
%define PS2_COMMAND_COPY_HIGH_NIBBLE_INPUT_TO_HIGH_NIBBLE_STATUS 0xC2
%define PS2_COMMAND_READ_CONTROLLER_OUTPUT_PORT 0xD0
%define PS2_COMMAND_WRITE_BYTE_CONTROLLER_OUTPUT_PORT 0xD1
%define PS2_COMMAND_WRITE_BYTE_PORT2 0xD4

%define PS2_DEVICE_COMMAND_IDENTIFY 0xF2
%define PS2_DEVICE_COMMAND_ENABLE_SCAN 0xF4
%define PS2_DEVICE_COMMAND_DISABLE_SCAN 0xF5
%define PS2_DEVICE_COMMAND_RESET 0xFF

%define PS2_CONTROLLER_TEST_SUCCESSFUL 0x55

%define PS2_STATUS_INPUT_BUFFER_FULL	(1 << 0)
%define PS2_STATUS_OUTPUT_BUFFER_FULL	(1 << 1)
%define PS2_STATUS_SYSTEM_FLAG			(1 << 2)
%define PS2_STATUS_COMMAND_DATA_FLAG	(1 << 3)
%define PS2_STATUS_UNK1					(1 << 4)
%define PS2_STATUS_UNK2					(1 << 5)
%define PS2_STATUS_TIMEOUT_FLAG			(1 << 6)
%define PS2_STATUS_PARITY_FLAG			(1 << 7)

%define PS2_CONFIGURATION_PORT1_INTERRUPT (1 << 0)
%define PS2_CONFIGURATION_PORT2_INTERRUPT (1 << 1)
%define PS2_CONFIGURATION_SYSTEM_FLAG     (1 << 2)
%define PS2_CONFIGURATION_ZERO            (1 << 3)
%define PS2_CONFIGURATION_PORT1_CLOCK     (1 << 4)
%define PS2_CONFIGURATION_PORT2_CLOCK     (1 << 5)
%define PS2_CONFIGURATION_PORT1_TRANSLATE (1 << 6)
%define PS2_CONFIGURATION_ZERO2           (1 << 7)

%define PORT_STATE_SUCCESS 0
%define PORT_STATE_CLOCK_STUCK_LOW 1
%define PORT_STATE_CLOCK_STUCK_HIGH 2
%define PORT_STATE_DATA_STUCK_LOW 3
%define PORT_STATE_DATA_STUCK_HIGH 4

extern PS2SendCommandToPort1
extern PS2SendCommandToPort2

%endif ;PS2_INC